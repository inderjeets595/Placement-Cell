<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>
    <%= title %> <!-- Page title dynamically set via EJS -->
  </title>
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" />
  <!-- Google Font Cherry Bomb One -->
  <link href="https://fonts.googleapis.com/css2?family=Cherry+Bomb+One&display=swap" rel="stylesheet">
  <!-- Custom CSS for styling the login/reset password page -->
  <link rel="stylesheet" href="/assets/css/login.css" />
  <!-- Custom CSS for iziToast notifications -->
  <link rel="stylesheet" href="/assets/css/izitoast.css" />
</head>

<body>

  <div class="form-container">
    <!-- Container for the form sections -->

    <div class="form-section">
      <!-- Form section -->

      <!-- Reset Password Form Section -->
      <div class="login-form-section" id="resetPasswordForm" <% if (showRegister) { %> style="display: none;" <% } %>>
        <!-- Display only if `showRegister` is false -->
        <div class="login-text">
          Reset Password
          <div class="login-quote">
            Welcome to CareerPool, explore the best careers!
          </div>
        </div>

        <form class="login-form" action="/employee/update-password" method="post">
          <!-- Form for updating the password -->
          <input type="hidden" name="accessToken" value="<%= accessToken %>" />
          <!-- Hidden input field to pass the access token -->

          <div class="input-box">
            <input type="password" name="newPassword" placeholder="Password" required autocomplete="section-blue email-address">
            <div class="underline"></div>
          </div>

          <div class="input-box">
            <input type="password" name="confirmPassword" placeholder="Confirm Password" required autocomplete="section-blue password">
            <div class="underline"></div>
          </div>

          <div class="input-box button">
            <input type="submit" name="submit" value="Continue">
          </div>
        </form>

        <div class="sign-up-text">
          Go to <a href="/">Homepage</a>
        </div>
      </div>

      <!-- Animation Section -->
      <div class="animation-section">
        <script src="https://unpkg.com/@dotlottie/player-component@latest/dist/dotlottie-player.mjs" type="module"></script>
        <!-- DotLottie player for animations -->
        <dotlottie-player src="https://lottie.host/43f32591-f97e-4b5d-a297-65864fd31c42/HKsGW18eVP.json" background="transparent" speed="1" style="width: 350px; height: 550px;" loop autoplay></dotlottie-player>
        <!-- Animation displayed on the page -->
      </div>
    </div>
  </div>

  <!-- JavaScript files for authentication functionalities and iziToast -->
  <script src="/assets/js/auth.js"></script>
  <script src="/assets/js/izitoast.js"></script>

  <script>
    // Initialize flash messages using EJS variables
    const success_flash = "<%= typeof flash.success !== 'undefined' ? flash.success : '' %>";
    const error_flash = "<%= typeof flash.error !== 'undefined' ? flash.error : '' %>";
    const info_flash = "<%= typeof flash.info !== 'undefined' ? flash.info : '' %>";
    const warning_flash = "<%= typeof flash.warning !== 'undefined' ? flash.warning : '' %>";

    // Use EJS variable to set the initial state for `showRegister`
    const showRegister = JSON.parse("<%= typeof showRegister !== 'undefined' ? showRegister : 'false' %>");
    console.log(success_flash, 'adf'); // Log flash messages for debugging
  </script>

  <!-- Additional custom JavaScript file -->
  <script src="/assets/js/fm.js"></script>
</body>

</html>
